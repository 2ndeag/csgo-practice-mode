csgo-practice-mode
===========================

[![Build status](http://ci.splewis.net/job/csgo-practice-mode/badge/icon)](http://ci.splewis.net/job/csgo-practice-mode/)

Practice Mode is a sourcemod plugin for helping players/teams run practices. It was formerly a part of [PugSetup](https://github.com/splewis/csgo-pug-setup) but has since been made into a separate project. It still contains integrations with pugsetup to make it available on it's ``.setup`` menu. It is also still distributed in pugsetup's releases.

**Note**: access to the .setup requires having the sourcemod admin changemap flag ("g") by default. See [the wiki](https://github.com/splewis/csgo-practice-mode/wiki/Restricting-command-access) for more information on changing how admin access works.

See this [YouTube video](https://www.youtube.com/watch?v=ua_I30DTggQ) for a demonstration.

## Download

Download from [the releases section](https://github.com/splewis/csgo-practice-mode/releases).

You may also download the [latest development build](http://ci.splewis.net/job/csgo-practice-mode/lastSuccessfulBuild/) if you wish. If you report any bugs from these, make sure to include the build number (when typing ``sm plugins list`` into the server console, the build number will be displayed with the plugin version).

### Installation

Extract all the files in the release archive to the ``csgo`` server directory.

You must have [SourceMod](http://www.sourcemod.net/downloads.php) and [MetaMod:Source](http://www.sourcemm.net/downloads) installed to use this plugin.

Make sure to [add yourself as a sourcemod admin](https://github.com/splewis/csgo-practice-mode/wiki/Command-access#adding-admins-in-sourcemod) as well. You will need this to start practicemode via the ``.setup`` command. You could also [remove the admin requirement](https://github.com/splewis/csgo-practice-mode/wiki/Command-access#launching-practicemode) for launching practicemode.

## Features
- Draws working grenade trajectories if ``sv_grenade_trajectory`` is on (since it doesn't work on dedicated servers)
- Adds new cvars to give extra practice settings (infinite money, noclip without needing sv_cheats enabled)
- Can save users' grenade locations/eye-angles with a name and description for them (grenade data is saved to a file on the server in the ``addons/sourcemod/data/practicemode/grenades`` directory)
- Users can goto any players' saved grenades to learn or revisit them
- Displays a menu with toggle settings to set practice cvars defined in [addons/sourcemod/configs/practicemode.cfg](configs/practicemode.cfg)
- Maintains your grenade history on the current map so you can use ``.back`` and ``.forward`` to see all spots you threw grenades from in the current session


### ConVars
You can edit these in the file ``cfg/sourcemod/practicemode.cfg``, which is autogenerated when the plugin first starts.

- ``sm_practicemode_alphabetize_nades``: displays grenades in alphabetical order instead of id order
- ``sm_practicemode_share_all_nades``: lets all users edit all nades, and hides who created them
- ``sm_practicemode_autostart``: whether to automatically start practicemode
- ``sm_practicemode_max_grenades_saved``: max # of grenades a user can save via ``.save``
- ``sm_infinite_money``: whether to give infinite money
- ``sm_allow_noclip``: whether the .noclip command is enabled
- ``sm_grenade_trajectory_use_player_color``: whether to use cl_color to get nade trajectory color
- ``sm_practicemode_can_be_started``: whether practicemode can be started

## Commands

### General commands

- ``.setup`` displays the practicemode menu
- ``.prac`` launches practice mode and displays the ``.setup`` menu
- ``.help``: displays this page
- ``.settings``: opens the client settings menu

### Saving grenade positions
- ``.nades [filter]``: displays a menu to select saved grenade positions. ``.nades`` with no argument shows all nades. ``filter`` can be any of: nade ids, category name, player name, or part of a grenade name
- ``.cats ``: displays a menu of all saved grenades by category
- ``.save <name>``: saves your current position as a grenade spot with the given name
- ``.goto <grenadeid>``: teleports you to a player's saved grenade (or your own if no player is named)
- ``.delete``: deletes the last grenade of yours that you used .goto (or .nades) to teleport to
- ``.find <text>``: searches all grenade names for a text match

### Modifying a saved grenade
All of the following commands can only be used on _your_ grenades. They will apply to the last saved grenade you went to, whether by ``.save``, ``.nades``, or ``.goto``.
- ``.desc <description>``: adds a grenade description to your last grenade
- ``.rename <new name>``: renames your last grenade
- ``.addcat <category> ...``: adds a category to your last grenade
- ``.removecat <category>``: removes a category from your last grenade
- ``.clearcats``: removes all categories on your last grenade
- ``.deletecat <category>``: removes a category from **all** of your saved grenades
- ``.copy <username> <grenadeid>``: copies another user's grenade and saves it for you
- ``.setdelay <delay>``: sets a delay on your last grenade. This is only used when using .throw against a category

### Testing grenades
- ``.last``: teleports you back to where you threw your last grenade from
- ``.back``: teleports you back a position in your grenade history
- ``.forward``: teleports you forward a position in your grenade history
- ``.flash``:  saves you position to test flashbangs against it. Use this command in a spot you want to try to blind, then move and throw the flashbang; you will be teleported back to the position and see how effective the flashbang is. Use ``.stop`` to cancel.
- ``.throw [filter]``: automatically throws all grenades matching the filter. With no filter, throws the last grenade you threw.

### Bot commands
- ``.bot``: adds a bot where you're standing (or crouching!); ``.crouchbot`` to force a crouching bot
- ``.botplace``: adds a bot at the point you're looking at (similar to the ``bot_place`` command)
- ``.boost``: spawns a bot boosting you (crouch-boosting if you're crouching); ``.crouchboost`` to force a crouching bot
- ``.movebot``: moves the last bot you placed to your current position
- ``.nobot``: removes a bot you've added with ``.bot`` (can also use ``.kickbot`` or ``.removebot``)
- ``.nobots``: clears all bots (``.clearbots``, ``.removebots``, ``.kickbots`` also work)

### Spawn commands
- ``.respawn``: makes you respawn at the spot you are standing (``.stop`` to cancel)
- ``.spawn``: same as ``.bestspawn`` (closest spawn)
- ``.spawn <number>``: teleports you to a spawn # for the maps's spawns
- ``.namespawn <name>``: saves the closest spawn to you under a name, which can then be gone to via ``.spawn <name>``
- ``.bestspawn``: teleports you to your team's closest spawn from your current position
- ``.worstspawn``: teleports you to your team's furthest spawn from your current position

### Miscellaneous commands
- ``.timer``: starts a timer when you start moving in any direction, and stops it when you stop moving, telling you the duration of time between starting/stopping
- ``.timer2``: starts a timer immediately and stops it when you type .timer2 again, telling you the duration of time
- ``.fastfoward`` (or ``.ff``): speeds up the server clock so the next 20 seconds lasts just 1 second
- ``.repeat <interval> <command>``: give a number of seconds and a chat command, the command will automatically repeat at the given interval. For example: ``.repeat 3 .throw`` repeats .throw every 3 seconds
- ``.delay <duration> <command>``: runs the given chat command after a given duration (in seconds)

Also see the [notes for power users](https://github.com/splewis/csgo-practice-mode/wiki/Notes-for-power-users) for more detail on using these commands effectively.
